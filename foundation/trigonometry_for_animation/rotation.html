<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>

<body>
    <canvas width='1000' height='500'></canvas>
    <script type="module">
        import captureMouse from '../capture-mouse.js';

        const canvas = document.querySelector('canvas');
        const ctx = canvas.getContext('2d');
        const debug = document.createElement('div');
        const mouse = captureMouse(canvas)

        const arrow = new Image();
        arrow.src = '../arrow-1717754.png';
        arrow._x = canvas.width / 2 - 200;
        arrow._y = canvas.height / 2;


        window.requestAnimationFrame(draw);
        function draw() {
            window.requestAnimationFrame(draw);
            const dx = mouse.x - arrow._x,
                dy = mouse.y - arrow._y;
            ctx.clearRect(0, 0, canvas.width, canvas.height)
            ctx.fillRect(canvas.width / 2, canvas.height / 2, 10, 10);
            ctx.fillStyle = 'red'
            ctx.save();
            ctx.translate(arrow._x, arrow._y)
            ctx.rotate(Math.atan2(dy, dx));
            ctx.drawImage(arrow, 0, -85, 200, 200);
            ctx.restore();

            debug.textContent = mouse.x + ' ' + mouse.y;
        }

        document.body.appendChild(debug);
    </script>
</body>

</html>